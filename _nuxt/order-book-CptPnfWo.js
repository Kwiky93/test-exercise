(function(){"use strict";let r=null,i=null;onmessage=function(o){const{symbol:u,lastUpdateId:l,asks:a,bids:n}=o.data;let s={};r&&r.close(1e3,"Work complete"),r=new WebSocket(`wss://stream.binance.com:9443/ws/${u.ws}@depth`),r.onmessage=t=>{const e=JSON.parse(t.data);e.u<=l||(!i&&e.U<=l+1&&e.u>=l+1&&(s=p(e,{asks:a,bids:n})),i&&e.U==i.u+1&&(s=p(e,{asks:a,bids:n})),i=e,this.postMessage(s))}};function p(o,u){o.a.sort((n,s)=>parseFloat(n[0])-parseFloat(s[0]));const l=c(o.a,u.asks);o.b.sort((n,s)=>parseFloat(s[0])-parseFloat(n[0]));const a=c(o.b,u.bids,!1);return{asks:l,bids:a}}function c(o,u,l=!0){const a=[],n=u[Symbol.iterator](),s=o[Symbol.iterator]();let t=n.next(),e=s.next();for(;!e.done||!t.done;)t.done?(a.push(e.value),e=s.next()):e.done||(l?t.value[0]<e.value[0]:t.value[0]>e.value[0])?(a.push(t.value),t=n.next()):t.value[0]===e.value[0]?(parseFloat(e.value[1])!=0&&a.push(e.value),t=n.next(),e=s.next()):(a.push(e.value),e=s.next());return a}})();
